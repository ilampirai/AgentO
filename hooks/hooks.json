{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash|Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "BEFORE executing: Check .agenticMemory/ATTEMPTS.md for failed attempts. If marked DONT_RETRY:true, STOP and find alternative."
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "‚ö†Ô∏è 500-LINE AUTO-SPLIT: Before writing, check if file will exceed 500 lines. If YES, do NOT ask user - AUTO-SPLIT immediately: 1) Identify a class, function group, or logical section to extract. 2) Create new module file (e.g., GameMovement.js from Game.js). 3) Move the code to new file. 4) Add import/require in original file. 5) Then continue with your write. Report: 'üì¶ Auto-split: [OldFile] ‚Üí [NewModule] (X lines moved)'. This is automatic - no confirmation needed."
          },
          {
            "type": "prompt",
            "prompt": "DUPLICATION CHECK: Search FUNCTIONS.md for similar functions. If exists, REUSE it. If memory sparse, do focused search first."
          },
          {
            "type": "prompt",
            "prompt": "COMMENT REQUIREMENT: New functions need JSDoc/docstring with @param and @returns."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "AUTO-INDEX: File modified. Update .agenticMemory/FUNCTIONS.md: 1) Extract new/changed function signatures with params and return types. 2) Parse imports to identify L1 dependencies. 3) If file >500 lines, flag in ARCHITECTURE.md. 4) Update DISCOVERY.md with explored area."
          },
          {
            "type": "prompt",
            "prompt": "VERSION CHECK: If package.json, requirements.txt, go.mod, Cargo.toml, pyproject.toml, or composer.json was modified, update .agenticMemory/VERSIONS.md with version changes."
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "DISCOVERY: After reading a new file, add its functions/classes to FUNCTIONS.md if not already present. Update DISCOVERY.md to mark this area as explored. Note any TODO/FIXME/HACK comments found."
          }
        ]
      }
    ],
    "PostToolUseFailure": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Command FAILED. Log to .agenticMemory/ATTEMPTS.md with timestamp, full command, error message. If permission denied or system blocked, mark DONT_RETRY:true. Find alternative approach immediately."
          }
        ]
      },
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Action failed. Record in ATTEMPTS.md: what was tried, why it failed. If system-blocked, mark DONT_RETRY:true and find alternative approach."
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "AGENTO ACTIVE: You are the orchestrator. ALL prompts route through you. MEMORY-FIRST RULE: On EVERY task, BEFORE any work: 1) Read DISCOVERY.md to see what areas are indexed. 2) Detect keywords in user's task. 3) If task area NOT in Discovery, TRIGGER INDEXER with focused search. 4) Only proceed AFTER relevant area is in memory. Build memory from the FIRST prompt - never work blind. Do NOT prompt for full index - build incrementally. After work, update FUNCTIONS.md and DISCOVERY.md."
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "KEYWORD AUTO-INDEX: Scan user message for feature keywords. TRIGGER MAP: login/auth/signin ‚Üí index auth area | cart/checkout/buy ‚Üí index cart area | user/profile/account ‚Üí index user area | api/endpoint/route ‚Üí index api area | database/model/schema ‚Üí index db area | test/spec ‚Üí index test area | ui/component/style ‚Üí index ui area. If keyword detected AND area not in DISCOVERY.md, MUST trigger indexer BEFORE proceeding. Also check for mode keywords: 'ultrawork' (focus), 'explain' (verbose), 'quick' (terse)."
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "SESSION END: 1) If loop active, check completion. 2) Final FUNCTIONS.md update. 3) Update DISCOVERY.md. 4) Add solved issues to ERRORS.md. 5) Clear resolved ATTEMPTS.md. 6) Update config.json. 7) Brief summary only - no long report."
          }
        ]
      }
    ],
    "PeriodicUpdate": [
      {
        "matcher": ".*",
        "interval": "5m",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "5-MIN UPDATE: If working on long task, give brief status: ‚è±Ô∏è Update | üìç Current task | ü§ñ Active agent | üìä Progress | ‚ùì Questions for user (need new tool? clarification? user testing?). Keep it SHORT - 3-5 lines max. Only ask questions if genuinely blocked or need user input."
          }
        ]
      }
    ]
  }
}
